import{defineComponent as e,withAsyncContext as a,computed as t,ref as r,watch as n,mergeProps as o,unref as s,toValue as l,getCurrentInstance as i,onServerPrefetch as d,shallowRef as u,toRef as c,nextTick as v,useSSRContext as p}from"vue";import{ssrRenderAttrs as m,ssrRenderList as f,ssrRenderAttr as y,ssrRenderStyle as g,ssrInterpolate as b,ssrRenderComponent as x}from"vue/server-renderer";import{PhArrowSquareOut as _}from"@phosphor-icons/vue";import{_ as h,a as D,b as w,c as A,d as j}from"./server.mjs";import{createClient as P}from"@supabase/supabase-js";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";import"lucide-vue-next";const E={trailing:!0};function debounce(e,a=25,t={}){if(t={...E,...t},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let r,n,o,s,l=[];const applyFn=(a,r)=>(o=async function(e,a,t){return await e.apply(a,t)}(e,a,r),o.finally(()=>{if(o=null,t.trailing&&s&&!n){const e=applyFn(a,s);return s=null,e}}),o),debounced=function(...e){return t.trailing&&(s=e),o||new Promise(o=>{const i=!n&&t.leading;clearTimeout(n),n=setTimeout(()=>{n=null;const a=t.leading?r:applyFn(this,e);s=null;for(const e of l)e(a);l=[]},a),i?(r=applyFn(this,e),o(r)):l.push(o)})},_clearTimeout=e=>{e&&(clearTimeout(e),n=null)};return debounced.isPending=()=>!!n,debounced.cancel=()=>{_clearTimeout(n),l=[],s=null},debounced.flush=()=>{if(_clearTimeout(n),!s||o)return;const e=s;return s=null,applyFn(this,e)},debounced}function useAsyncData(...e){const a="string"==typeof e[e.length-1]?e.pop():void 0;(function(e,a){if("string"==typeof e)return!1;if("object"==typeof e&&null!==e)return!1;if("function"==typeof e&&"function"==typeof a)return!1;return!0})(e[0],e[1])&&e.unshift(a);let[n,o,p={}]=e;const m=t(()=>l(n));if("string"!=typeof m.value)throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if("function"!=typeof o)throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const f=D();function createInitialFetch(){var e;const a={cause:"initial",dedupe:p.dedupe};return(null==(e=f._asyncData[m.value])?void 0:e._init)||(a.cachedData=p.getCachedData(m.value,f,{cause:"initial"}),f._asyncData[m.value]=function(e,a,n,o,l){var i;null!=(i=e.payload._errors)[a]||(i[a]=void 0);const d=o.getCachedData!==getDefaultCachedData,p=n,m=o.deep?r:u,f=void 0!==l,y=e.hook("app:data:refresh",async e=>{e&&!e.includes(a)||await g.execute({cause:"refresh:hook"})}),g={data:m(f?l:o.default()),pending:t(()=>"pending"===g.status.value),error:c(e.payload._errors,a),status:u("idle"),execute:(...t)=>{var r,n;const[l,i]=t,d=l&&void 0===i&&"object"==typeof l?l:{};if(e._asyncDataPromises[a]&&"defer"===(null!=(r=d.dedupe)?r:o.dedupe))return e._asyncDataPromises[a];{const t="cachedData"in d?d.cachedData:o.getCachedData(a,e,{cause:null!=(n=d.cause)?n:"refresh:manual"});if(void 0!==t)return e.payload.data[a]=g.data.value=t,g.error.value=void 0,g.status.value="success",Promise.resolve(t)}g._abortController&&g._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),g._abortController=new AbortController,g.status.value="pending";const u=new AbortController,c=new Promise((a,t)=>{var r,n;try{const s=null!=(r=d.timeout)?r:o.timeout,l=function(e,a,t){var r,n,o;const s=e.filter(e=>!!e);if("number"==typeof t&&t>=0){const e=null==(r=AbortSignal.timeout)?void 0:r.call(AbortSignal,t);e&&s.push(e)}if(AbortSignal.any)return AbortSignal.any(s);const l=new AbortController;for(const e of s)if(e.aborted){const a=null!=(n=e.reason)?n:new DOMException("Aborted","AbortError");try{l.abort(a)}catch{l.abort()}return l.signal}const onAbort=()=>{var e;const a=s.find(e=>e.aborted),t=null!=(e=null==a?void 0:a.reason)?e:new DOMException("Aborted","AbortError");try{l.abort(t)}catch{l.abort()}};for(const e of s)null==(o=e.addEventListener)||o.call(e,"abort",onAbort,{once:!0,signal:a});return l.signal}([null==(n=g._abortController)?void 0:n.signal,null==d?void 0:d.signal],u.signal,s);if(l.aborted){const e=l.reason;return void t(e instanceof Error?e:new DOMException(String(null!=e?e:"Aborted"),"AbortError"))}return l.addEventListener("abort",()=>{const e=l.reason;t(e instanceof Error?e:new DOMException(String(null!=e?e:"Aborted"),"AbortError"))},{once:!0,signal:u.signal}),Promise.resolve(p(e,{signal:l})).then(a,t)}catch(e){t(e)}}).then(async t=>{let r=t;o.transform&&(r=await o.transform(t)),o.pick&&(r=function(e,a){const t={};for(const r of a)t[r]=e[r];return t}(r,o.pick)),e.payload.data[a]=r,g.data.value=r,g.error.value=void 0,g.status.value="success"}).catch(t=>{var r;return e._asyncDataPromises[a]&&e._asyncDataPromises[a]!==c||(null==(r=g._abortController)?void 0:r.signal.aborted)?e._asyncDataPromises[a]:"undefined"!=typeof DOMException&&t instanceof DOMException&&"AbortError"===t.name?(g.status.value="idle",e._asyncDataPromises[a]):(g.error.value=A(t),g.data.value=s(o.default()),void(g.status.value="error"))}).finally(()=>{u.abort(),delete e._asyncDataPromises[a]});return e._asyncDataPromises[a]=c,e._asyncDataPromises[a]},_execute:debounce((...e)=>g.execute(...e),0,{leading:!0}),_default:o.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var t;y(),(null==(t=e._asyncData[a])?void 0:t._init)&&(e._asyncData[a]._init=!1),d||v(()=>{var t;(null==(t=e._asyncData[a])?void 0:t._init)||(clearNuxtDataByKey(e,a),g.execute=()=>Promise.resolve())})}};return g}(f,m.value,o,p,a.cachedData)),()=>f._asyncData[m.value].execute(a)}null!=p.server||(p.server=!0),null!=p.default||(p.default=getDefault),null!=p.getCachedData||(p.getCachedData=getDefaultCachedData),null!=p.lazy||(p.lazy=!1),null!=p.immediate||(p.immediate=!0),null!=p.deep||(p.deep=w.deep),null!=p.dedupe||(p.dedupe="cancel"),p._functionName,f._asyncData[m.value];const y=createInitialFetch();f._asyncData[m.value]._deps++;if(!1!==p.server&&f.payload.serverRendered&&p.immediate){const e=y();i()?d(()=>e):f.hook("app:created",async()=>{await e})}const g={data:writableComputedRef(()=>{var e;return null==(e=f._asyncData[m.value])?void 0:e.data}),pending:writableComputedRef(()=>{var e;return null==(e=f._asyncData[m.value])?void 0:e.pending}),status:writableComputedRef(()=>{var e;return null==(e=f._asyncData[m.value])?void 0:e.status}),error:writableComputedRef(()=>{var e;return null==(e=f._asyncData[m.value])?void 0:e.error}),refresh:(...e)=>{var a;if(!(null==(a=f._asyncData[m.value])?void 0:a._init)){return createInitialFetch()()}return f._asyncData[m.value].execute(...e)},execute:(...e)=>g.refresh(...e),clear:()=>{const e=f._asyncData[m.value];if(null==e?void 0:e._abortController)try{e._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{e._abortController=void 0}clearNuxtDataByKey(f,m.value)}},b=Promise.resolve(f._asyncDataPromises[m.value]).then(()=>g);return Object.assign(b,g),b}function writableComputedRef(e){return t({get(){var a;return null==(a=e())?void 0:a.value},set(a){const t=e();t&&(t.value=a)}})}function clearNuxtDataByKey(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=void 0),e._asyncData[a]&&(e._asyncData[a].data.value=s(e._asyncData[a]._default()),e._asyncData[a].error.value=void 0,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]=void 0)}const getDefault=()=>{},getDefaultCachedData=(e,a,t)=>a.isHydrating?a.payload.data[e]:"refresh:manual"!==t.cause&&"refresh:hook"!==t.cause?a.static.data[e]:void 0;let C=null;function toIdArray(e){return Array.isArray(e)?e.map(e=>"number"==typeof e?e:parseInt(String(e),10)).filter(e=>!Number.isNaN(e)):[]}async function useProjetos(){var e,a,t;const r=function(){if(C)return C;const e=j().public,a=e.supabaseUrl,t=e.supabaseAnonKey;return a&&t?(C=P(a,t),C):null}();if(!r)return[];const[n,o,s]=await Promise.all([r.from("projetos").select("id, titulo, descricao, capa, imgens, link_web, link_google, link_apple, ranking, mobile, slug, created_at, categoria_projeto, ferramentas").eq("valeapps",!0).order("ranking",{ascending:!0,nullsFirst:!1}).order("id",{ascending:!0}),r.from("categorias_proejto").select("id, nome"),r.from("ferramentas").select("id, nome")]);if(n.error)return console.warn("[useProjetos] Erro ao carregar projetos:",n.error.message),[];const l=new Map;if(!o.error&&o.data)for(const a of o.data)l.set(a.id,null!=(e=a.nome)?e:"");const i=new Map;if(!s.error&&s.data)for(const e of s.data)i.set(e.id,null!=(a=e.nome)?a:"");return(null!=(t=n.data)?t:[]).map(e=>{const a=toIdArray(e.categoria_projeto),t=toIdArray(e.ferramentas);return{...e,categoriasNomes:a.map(e=>{var a;return null!=(a=l.get(e))?a:""}).filter(Boolean),ferramentasNomes:t.map(e=>{var a;return null!=(a=i.get(e))?a:""}).filter(Boolean)}})}const k=e({__name:"ProjectsSection",__ssrInlineRender:!0,async setup(e){let l,i;const{data:d,pending:u}=([l,i]=a(()=>useAsyncData("projetos-section",()=>useProjetos())),l=await l,i(),l),c=t(()=>{var e;return null!=(e=d.value)?e:[]});r();const v=r([]);function imageUrl(e){if(e.capa)return e.capa;const a=e.imgens;return Array.isArray(a)&&a.length>0?a[0]:null}return n(c,()=>{var e;v.value=(null!=(e=c.value)?e:[]).map(()=>1)},{immediate:!0}),(e,a,t,r)=>{var n;a(`<section${m(o({class:"py-20"},r))} data-v-7e060ed2><div class="container mx-auto px-6" data-v-7e060ed2><div class="text-center mb-16" data-v-7e060ed2><h2 class="text-4xl md:text-5xl font-medium mb-6" data-v-7e060ed2> Cases incríveis <span class="block" data-v-7e060ed2>que construímos</span></h2><p class="text-xl text-muted-foreground max-w-3xl mx-auto" data-v-7e060ed2> Conheça alguns dos aplicativos mobile e web que desenvolvemos e como ajudamos nossos clientes a alcançar seus objetivos digitais com tecnologia de ponta. </p></div>`),s(u)?(a('<div class="grid grid-cols-1 md:grid-cols-3 gap-5 md:gap-6 max-w-7xl mx-auto" data-v-7e060ed2>\x3c!--[--\x3e'),f(4,e=>{a('<div class="rounded-lg bg-muted/30 h-[480px] animate-pulse" data-v-7e060ed2></div>')}),a("\x3c!--]--\x3e</div>")):(null==(n=s(c))?void 0:n.length)?(a('<div class="grid grid-cols-1 md:grid-cols-3 gap-5 md:gap-6 max-w-7xl mx-auto" data-v-7e060ed2>\x3c!--[--\x3e'),f(s(c),(e,r)=>{var n,o,l,i,d;a(`<div${y("data-index",r)} style="${g({opacity:null!=(n=v.value[r])?n:1})}" class="group project-card" data-v-7e060ed2><div class="relative" data-v-7e060ed2><div class="relative mx-auto max-w-full" data-v-7e060ed2><div class="relative bg-gradient-to-b from-gray-800 to-gray-900 rounded-lg shadow-2xl group-hover:shadow-3xl transition-all duration-500 group-hover:scale-[1.02] overflow-hidden" data-v-7e060ed2><div class="relative bg-black h-[480px]" data-v-7e060ed2>`),imageUrl(e)?a(`<img${y("src",imageUrl(e))}${y("alt",`Interface do projeto ${null!=(o=e.titulo)?o:"Vale Apps"}`)} class="w-full h-full object-cover" loading="lazy" data-v-7e060ed2>`):a('<div class="w-full h-full bg-muted/50 flex items-center justify-center" data-v-7e060ed2><span class="text-muted-foreground text-sm" data-v-7e060ed2>Sem imagem</span></div>'),a(`<div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/60 to-transparent" data-v-7e060ed2></div><div class="absolute inset-0 flex flex-col justify-end p-6 md:p-8" data-v-7e060ed2><div class="space-y-3" data-v-7e060ed2><div class="flex items-center gap-3" data-v-7e060ed2><h3 class="text-2xl md:text-3xl font-medium text-white" data-v-7e060ed2>${b(null!=(l=e.titulo)?l:"Projeto")}</h3>`),e.link_web?(a(`<a${y("href",e.link_web)} target="_blank" rel="noopener noreferrer"${y("aria-label",`Visitar site do ${null!=(i=e.titulo)?i:"projeto"}`)} class="text-white/80 hover:text-white transition-colors" data-v-7e060ed2>`),a(x(s(_),{size:20},null,t)),a("</a>")):a("\x3c!----\x3e"),a(`</div><p class="text-white/90 text-base md:text-lg leading-relaxed max-w-2xl line-clamp-4" data-v-7e060ed2>${b(null!=(d=e.descricao)?d:"")}</p></div></div></div></div></div></div></div>`)}),a("\x3c!--]--\x3e</div>")):a('<p class="text-center text-muted-foreground py-12" data-v-7e060ed2> Nenhum projeto disponível no momento. </p>'),a("</div></section>")}}}),S=k.setup;k.setup=(e,a)=>{const t=p();return(t.modules||(t.modules=new Set)).add("components/ProjectsSection.vue"),S?S(e,a):void 0};const N=Object.assign(h(k,[["__scopeId","data-v-7e060ed2"]]),{__name:"ProjectsSection"});export{N as default};
//# sourceMappingURL=ProjectsSection-BSEbDXw7.mjs.map
