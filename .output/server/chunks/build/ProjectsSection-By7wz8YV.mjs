import{defineComponent as e,withAsyncContext as a,computed as t,ref as r,watch as o,mergeProps as n,unref as l,toValue as i,getCurrentInstance as s,onServerPrefetch as u,shallowRef as d,toRef as c,nextTick as v,useSSRContext as p}from"vue";import{ssrRenderAttrs as m,ssrRenderList as b,ssrRenderAttr as f,ssrRenderStyle as g,ssrInterpolate as y,ssrRenderComponent as x}from"vue/server-renderer";import{PhGlobe as h,PhGooglePlayLogo as _,PhAppleLogo as w}from"@phosphor-icons/vue";import{_ as D,a as A,b as j,c as P,d as k}from"./server.mjs";import{createClient as E}from"@supabase/supabase-js";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"node:fs";import"node:path";import"node:crypto";import"node:url";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/utils";import"vue-router";import"lucide-vue-next";const C={trailing:!0};function debounce(e,a=25,t={}){if(t={...C,...t},!Number.isFinite(a))throw new TypeError("Expected `wait` to be a finite number");let r,o,n,l,i=[];const applyFn=(a,r)=>(n=async function(e,a,t){return await e.apply(a,t)}(e,a,r),n.finally(()=>{if(n=null,t.trailing&&l&&!o){const e=applyFn(a,l);return l=null,e}}),n),debounced=function(...e){return t.trailing&&(l=e),n||new Promise(n=>{const s=!o&&t.leading;clearTimeout(o),o=setTimeout(()=>{o=null;const a=t.leading?r:applyFn(this,e);l=null;for(const e of i)e(a);i=[]},a),s?(r=applyFn(this,e),n(r)):i.push(n)})},_clearTimeout=e=>{e&&(clearTimeout(e),o=null)};return debounced.isPending=()=>!!o,debounced.cancel=()=>{_clearTimeout(o),i=[],l=null},debounced.flush=()=>{if(_clearTimeout(o),!l||n)return;const e=l;return l=null,applyFn(this,e)},debounced}function useAsyncData(...e){const a="string"==typeof e[e.length-1]?e.pop():void 0;(function(e,a){if("string"==typeof e)return!1;if("object"==typeof e&&null!==e)return!1;if("function"==typeof e&&"function"==typeof a)return!1;return!0})(e[0],e[1])&&e.unshift(a);let[o,n,p={}]=e;const m=t(()=>i(o));if("string"!=typeof m.value)throw new TypeError("[nuxt] [useAsyncData] key must be a string.");if("function"!=typeof n)throw new TypeError("[nuxt] [useAsyncData] handler must be a function.");const b=A();function createInitialFetch(){var e;const a={cause:"initial",dedupe:p.dedupe};return(null==(e=b._asyncData[m.value])?void 0:e._init)||(a.cachedData=p.getCachedData(m.value,b,{cause:"initial"}),b._asyncData[m.value]=function(e,a,o,n,i){var s;null!=(s=e.payload._errors)[a]||(s[a]=void 0);const u=n.getCachedData!==getDefaultCachedData,p=o,m=n.deep?r:d,b=void 0!==i,f=e.hook("app:data:refresh",async e=>{e&&!e.includes(a)||await g.execute({cause:"refresh:hook"})}),g={data:m(b?i:n.default()),pending:t(()=>"pending"===g.status.value),error:c(e.payload._errors,a),status:d("idle"),execute:(...t)=>{var r,o;const[i,s]=t,u=i&&void 0===s&&"object"==typeof i?i:{};if(e._asyncDataPromises[a]&&"defer"===(null!=(r=u.dedupe)?r:n.dedupe))return e._asyncDataPromises[a];{const t="cachedData"in u?u.cachedData:n.getCachedData(a,e,{cause:null!=(o=u.cause)?o:"refresh:manual"});if(void 0!==t)return e.payload.data[a]=g.data.value=t,g.error.value=void 0,g.status.value="success",Promise.resolve(t)}g._abortController&&g._abortController.abort(new DOMException("AsyncData request cancelled by deduplication","AbortError")),g._abortController=new AbortController,g.status.value="pending";const d=new AbortController,c=new Promise((a,t)=>{var r,o;try{const l=null!=(r=u.timeout)?r:n.timeout,i=function(e,a,t){var r,o,n;const l=e.filter(e=>!!e);if("number"==typeof t&&t>=0){const e=null==(r=AbortSignal.timeout)?void 0:r.call(AbortSignal,t);e&&l.push(e)}if(AbortSignal.any)return AbortSignal.any(l);const i=new AbortController;for(const e of l)if(e.aborted){const a=null!=(o=e.reason)?o:new DOMException("Aborted","AbortError");try{i.abort(a)}catch{i.abort()}return i.signal}const onAbort=()=>{var e;const a=l.find(e=>e.aborted),t=null!=(e=null==a?void 0:a.reason)?e:new DOMException("Aborted","AbortError");try{i.abort(t)}catch{i.abort()}};for(const e of l)null==(n=e.addEventListener)||n.call(e,"abort",onAbort,{once:!0,signal:a});return i.signal}([null==(o=g._abortController)?void 0:o.signal,null==u?void 0:u.signal],d.signal,l);if(i.aborted){const e=i.reason;return void t(e instanceof Error?e:new DOMException(String(null!=e?e:"Aborted"),"AbortError"))}return i.addEventListener("abort",()=>{const e=i.reason;t(e instanceof Error?e:new DOMException(String(null!=e?e:"Aborted"),"AbortError"))},{once:!0,signal:d.signal}),Promise.resolve(p(e,{signal:i})).then(a,t)}catch(e){t(e)}}).then(async t=>{let r=t;n.transform&&(r=await n.transform(t)),n.pick&&(r=function(e,a){const t={};for(const r of a)t[r]=e[r];return t}(r,n.pick)),e.payload.data[a]=r,g.data.value=r,g.error.value=void 0,g.status.value="success"}).catch(t=>{var r;return e._asyncDataPromises[a]&&e._asyncDataPromises[a]!==c||(null==(r=g._abortController)?void 0:r.signal.aborted)?e._asyncDataPromises[a]:"undefined"!=typeof DOMException&&t instanceof DOMException&&"AbortError"===t.name?(g.status.value="idle",e._asyncDataPromises[a]):(g.error.value=P(t),g.data.value=l(n.default()),void(g.status.value="error"))}).finally(()=>{d.abort(),delete e._asyncDataPromises[a]});return e._asyncDataPromises[a]=c,e._asyncDataPromises[a]},_execute:debounce((...e)=>g.execute(...e),0,{leading:!0}),_default:n.default,_deps:0,_init:!0,_hash:void 0,_off:()=>{var t;f(),(null==(t=e._asyncData[a])?void 0:t._init)&&(e._asyncData[a]._init=!1),u||v(()=>{var t;(null==(t=e._asyncData[a])?void 0:t._init)||(clearNuxtDataByKey(e,a),g.execute=()=>Promise.resolve())})}};return g}(b,m.value,n,p,a.cachedData)),()=>b._asyncData[m.value].execute(a)}null!=p.server||(p.server=!0),null!=p.default||(p.default=getDefault),null!=p.getCachedData||(p.getCachedData=getDefaultCachedData),null!=p.lazy||(p.lazy=!1),null!=p.immediate||(p.immediate=!0),null!=p.deep||(p.deep=j.deep),null!=p.dedupe||(p.dedupe="cancel"),p._functionName,b._asyncData[m.value];const f=createInitialFetch();b._asyncData[m.value]._deps++;if(!1!==p.server&&b.payload.serverRendered&&p.immediate){const e=f();s()?u(()=>e):b.hook("app:created",async()=>{await e})}const g={data:writableComputedRef(()=>{var e;return null==(e=b._asyncData[m.value])?void 0:e.data}),pending:writableComputedRef(()=>{var e;return null==(e=b._asyncData[m.value])?void 0:e.pending}),status:writableComputedRef(()=>{var e;return null==(e=b._asyncData[m.value])?void 0:e.status}),error:writableComputedRef(()=>{var e;return null==(e=b._asyncData[m.value])?void 0:e.error}),refresh:(...e)=>{var a;if(!(null==(a=b._asyncData[m.value])?void 0:a._init)){return createInitialFetch()()}return b._asyncData[m.value].execute(...e)},execute:(...e)=>g.refresh(...e),clear:()=>{const e=b._asyncData[m.value];if(null==e?void 0:e._abortController)try{e._abortController.abort(new DOMException("AsyncData aborted by user.","AbortError"))}finally{e._abortController=void 0}clearNuxtDataByKey(b,m.value)}},y=Promise.resolve(b._asyncDataPromises[m.value]).then(()=>g);return Object.assign(y,g),y}function writableComputedRef(e){return t({get(){var a;return null==(a=e())?void 0:a.value},set(a){const t=e();t&&(t.value=a)}})}function clearNuxtDataByKey(e,a){a in e.payload.data&&(e.payload.data[a]=void 0),a in e.payload._errors&&(e.payload._errors[a]=void 0),e._asyncData[a]&&(e._asyncData[a].data.value=l(e._asyncData[a]._default()),e._asyncData[a].error.value=void 0,e._asyncData[a].status.value="idle"),a in e._asyncDataPromises&&(e._asyncDataPromises[a]=void 0)}const getDefault=()=>{},getDefaultCachedData=(e,a,t)=>a.isHydrating?a.payload.data[e]:"refresh:manual"!==t.cause&&"refresh:hook"!==t.cause?a.static.data[e]:void 0;let $=null;function toIdArray(e){return Array.isArray(e)?e.map(e=>"number"==typeof e?e:parseInt(String(e),10)).filter(e=>!Number.isNaN(e)):[]}async function useProjetos(){var e,a,t;const r=function(){if($)return $;const e=k().public,a=e.supabaseUrl,t=e.supabaseAnonKey;return a&&t?($=E(a,t),$):null}();if(!r)return[];const[o,n,l]=await Promise.all([r.from("projetos").select("id, titulo, descricao, capa, imgens, link_web, link_google, link_apple, ranking, mobile, slug, created_at, categoria_projeto, ferramentas").eq("valeapps",!0).order("ranking",{ascending:!0,nullsFirst:!1}).order("id",{ascending:!0}),r.from("categorias_proejto").select("id, nome"),r.from("ferramentas").select("id, nome")]);if(o.error)return console.warn("[useProjetos] Erro ao carregar projetos:",o.error.message),[];const i=new Map;if(!n.error&&n.data)for(const a of n.data)i.set(a.id,null!=(e=a.nome)?e:"");const s=new Map;if(!l.error&&l.data)for(const e of l.data)s.set(e.id,null!=(a=e.nome)?a:"");return(null!=(t=o.data)?t:[]).map(e=>{const a=toIdArray(e.categoria_projeto),t=toIdArray(e.ferramentas);return{...e,categoriasNomes:a.map(e=>{var a;return null!=(a=i.get(e))?a:""}).filter(Boolean),ferramentasNomes:t.map(e=>{var a;return null!=(a=s.get(e))?a:""}).filter(Boolean)}})}const S=e({__name:"ProjectsSection",__ssrInlineRender:!0,async setup(e){let i,s;const{data:u,pending:d}=([i,s]=a(()=>useAsyncData("projetos-section",()=>useProjetos())),i=await i,s(),i),c=t(()=>{var e;return null!=(e=u.value)?e:[]});r();const v=r([]);function imageUrl(e){if(e.capa)return e.capa;const a=e.imgens;return Array.isArray(a)&&a.length>0?a[0]:null}return o(c,()=>{var e;v.value=(null!=(e=c.value)?e:[]).map(()=>1)},{immediate:!0}),(e,a,t,r)=>{var o;a(`<section${m(n({class:"py-20"},r))} data-v-1406bab8><div class="container mx-auto px-6" data-v-1406bab8><div class="text-center mb-16" data-v-1406bab8><h2 class="text-4xl md:text-5xl font-medium mb-6" data-v-1406bab8> Cases incríveis <span class="block" data-v-1406bab8>que construímos</span></h2><p class="text-xl text-muted-foreground max-w-3xl mx-auto" data-v-1406bab8> Conheça alguns dos aplicativos mobile e web que desenvolvemos e como ajudamos nossos clientes a alcançar seus objetivos digitais com tecnologia de ponta. </p></div>`),l(d)?(a('<div class="grid grid-cols-1 md:grid-cols-3 gap-5 md:gap-6 max-w-7xl mx-auto" data-v-1406bab8>\x3c!--[--\x3e'),b(4,e=>{a('<div class="rounded-lg bg-muted/30 h-[480px] animate-pulse" data-v-1406bab8></div>')}),a("\x3c!--]--\x3e</div>")):(null==(o=l(c))?void 0:o.length)?(a('<div class="grid grid-cols-1 md:grid-cols-3 gap-5 md:gap-6 max-w-7xl mx-auto" data-v-1406bab8>\x3c!--[--\x3e'),b(l(c),(e,r)=>{var o,n,i,s,u,d,c;a(`<div${f("data-index",r)} style="${g({opacity:null!=(o=v.value[r])?o:1})}" class="group project-card" data-v-1406bab8><div class="relative" data-v-1406bab8><div class="relative mx-auto max-w-full" data-v-1406bab8><div class="relative bg-gradient-to-b from-gray-800 to-gray-900 rounded-lg shadow-2xl group-hover:shadow-3xl transition-all duration-500 group-hover:scale-[1.02] overflow-hidden" data-v-1406bab8><div class="relative bg-black h-[480px]" data-v-1406bab8>`),imageUrl(e)?a(`<img${f("src",imageUrl(e))}${f("alt",`Interface do projeto ${null!=(n=e.titulo)?n:"Vale Apps"}`)} class="w-full h-full object-cover" loading="lazy" data-v-1406bab8>`):a('<div class="w-full h-full bg-muted/50 flex items-center justify-center" data-v-1406bab8><span class="text-muted-foreground text-sm" data-v-1406bab8>Sem imagem</span></div>'),a(`<div class="absolute inset-0 bg-gradient-to-t from-black/90 via-black/60 to-transparent" data-v-1406bab8></div><div class="absolute inset-0 flex flex-col justify-end p-6 md:p-8" data-v-1406bab8><div class="space-y-3" data-v-1406bab8><div class="flex items-center gap-3 flex-wrap" data-v-1406bab8><h3 class="text-2xl md:text-3xl font-medium text-white" data-v-1406bab8>${y(null!=(i=e.titulo)?i:"Projeto")}</h3>`),!function(e){var a,t,r;return!!((null==(a=e.link_web)?void 0:a.trim())||(null==(t=e.link_google)?void 0:t.trim())||(null==(r=e.link_apple)?void 0:r.trim()))}(e)?a("\x3c!----\x3e"):(a('<div class="flex items-center gap-2" data-v-1406bab8>'),e.link_web?(a(`<a${f("href",e.link_web)} target="_blank" rel="noopener noreferrer"${f("aria-label",`Visitar site do ${null!=(s=e.titulo)?s:"projeto"}`)} class="p-1.5 rounded-md text-white/80 hover:text-white hover:bg-white/10 transition-colors" title="Visitar site" data-v-1406bab8>`),a(x(l(h),{size:20},null,t)),a("</a>")):a("\x3c!----\x3e"),e.link_google?(a(`<a${f("href",e.link_google)} target="_blank" rel="noopener noreferrer"${f("aria-label",`Abrir na Google Play: ${null!=(u=e.titulo)?u:"projeto"}`)} class="p-1.5 rounded-md text-white/80 hover:text-white hover:bg-white/10 transition-colors" title="Google Play" data-v-1406bab8>`),a(x(l(_),{size:20},null,t)),a("</a>")):a("\x3c!----\x3e"),e.link_apple?(a(`<a${f("href",e.link_apple)} target="_blank" rel="noopener noreferrer"${f("aria-label",`Abrir na App Store: ${null!=(d=e.titulo)?d:"projeto"}`)} class="p-1.5 rounded-md text-white/80 hover:text-white hover:bg-white/10 transition-colors" title="App Store" data-v-1406bab8>`),a(x(l(w),{size:20},null,t)),a("</a>")):a("\x3c!----\x3e"),a("</div>")),a(`</div><p class="text-white/90 text-base md:text-lg leading-relaxed max-w-2xl line-clamp-4" data-v-1406bab8>${y(null!=(c=e.descricao)?c:"")}</p></div></div></div></div></div></div></div>`)}),a("\x3c!--]--\x3e</div>")):a('<p class="text-center text-muted-foreground py-12" data-v-1406bab8> Nenhum projeto disponível no momento. </p>'),a("</div></section>")}}}),N=S.setup;S.setup=(e,a)=>{const t=p();return(t.modules||(t.modules=new Set)).add("components/ProjectsSection.vue"),N?N(e,a):void 0};const I=Object.assign(D(S,[["__scopeId","data-v-1406bab8"]]),{__name:"ProjectsSection"});export{I as default};
//# sourceMappingURL=ProjectsSection-By7wz8YV.mjs.map
